<fieldset [formGroup]="visit" (change)="formChange.emit()">
  <legend>Enter Visit</legend>
  <mat-form-field>
    <mat-label>Year</mat-label>
    <input
      matInput
      required
      type="number"
      name="year"
      autocomplete="off"
      formControlName="year"
      placeholder="Ex. 2000"
    />
    <mat-error
      *ngIf="
        visit.get('year')?.hasError('required') ||
        visit.get('year')?.hasError('min') ||
        visit.get('year')?.hasError('max')
      "
    >
      Year must be at least <strong>{{ minYear }}</strong> and at most
      <strong>{{ currentYear }}</strong>
    </mat-error>
    <mat-error *ngIf="visit.hasError('forbiddenMaxDuration')">
      Duration must be at least <strong>1</strong> and at most
      <strong>{{ getMaxDuration(visit.value.year) }}</strong>
    </mat-error>
  </mat-form-field>
  <div>
    <label for="country">Country</label>
    <input
      type="text"
      name="country"
      placeholder="Search for a country..."
      autocomplete="off"
      formControlName="country"
      (keyup)="onCountrySearch(countrySearch.value)"
      #countrySearch
    />
    <ul>
      <li
        *ngFor="let country of countriesAutoComplete"
        (click)="onCountrySelect(country)"
      >
        {{ country }}
      </li>
    </ul>
  </div>
  <mat-form-field>
    <mat-label>Duration (days)</mat-label>
    <input
      matInput
      required
      type="number"
      name="duration"
      autocomplete="off"
      formControlName="duration"
      placeholder="Ex. 10"
      [errorStateMatcher]="maxDurationMatcher"
    />
    <mat-error>
      Duration must be at least <strong>1</strong> and at most
      <strong>{{ getMaxDuration(visit.value.year) }}</strong>
    </mat-error>
  </mat-form-field>
  <button
    class="delete"
    mat-flat-button
    color="warn"
    type="button"
    (click)="delete.emit()"
  >
    Delete
  </button>
</fieldset>
